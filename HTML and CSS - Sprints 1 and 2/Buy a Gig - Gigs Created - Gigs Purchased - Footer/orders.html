<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/app.css">
	<link rel="stylesheet" href="css/footer.css">
	<link rel="stylesheet" href="css/orders.css">
</head>
<body>
	<nav style="display: none;">
	    <div class="main-title-class">
	        <a href="#" class="main-title">Music World</a>
	        <img src="assets/Music World Logo Blue.svg" alt="MWLogo" class="main-logo">
	    </div>
	    
	    <div class="search-container">
	        <span class="material-icons">search</span>
	        
	        <input type="text" class="search">
	       
	        <div class="search-btn">
	           <button>Search</button>
	       </div>
	    </div>

	    <div class="navigation">
	        <a href="">Messages</a>
	        <a href="">MisGigs</a>
	        <a href="">Orders</a>
	        <a href="">Create a Gig</a> 
	    </div>
	    
	    <img src="assets/user-icon.png" alt="User Icon" class="user-icon">
	</nav>

	<div class="wrapper">

		<div style="width: 100%; padding: 20px 10%; background-color: #F7F7F7;">
			
			<div class="margin">
				<h1>Manage orders</h1>
			</div>

			<div class="margin tables-links">
				<a href="?status=active" class="table-link">Active</a>
				<a href="?status=missing" class="table-link">Missing details</a>
				<a href="?status=awaiting" class="table-link">Awaiting my review</a>
				<a href="?status=delivered" class="table-link">Delivered</a>
				<a href="?status=completed" class="table-link">Completed</a>
				<a href="?status=cancelled" class="table-link">Cancelled</a>
				<a href="?" class="table-link">All</a>
			</div>

			<div class="margin responsive-table">
				<table class="gigs-table">
					<thead>
						<tr>
							<th></th>
							<th></th>
							<th style="width: 13%;">Order Date</th>
							<th style="width: 13%;">Due on</th>
							<th style="width: 13%;">Total</th>
							<th style="width: 13%;">Status</th>
						</tr>
					</thead>
					<tbody id="table-body">
						<tr>
							<td class="table-image-wrapper">
								<img src="assets/placeholder.png" alt="Gig image" class="table-image">
							</td>
							<td>be your personal swimming coach and analyst</td>
							<td>07 Feb 2022</td>
							<td>10 Feb 2022</td>
							<td>€11.52</td>
							<td>
								<a href="#" class="status">Order again</a>
							</td>
						</tr>

						<tr>
							<td class="table-image-wrapper">
								<img src="assets/placeholder.png" alt="Gig image" class="table-image">
							</td>
							<td>do photoshop editing, graphic designing job professionally</td>
							<td>08 Jan 2022</td>
							<td>09 Jan 2022</td>
							<td>€16.47</td>
							<td>
								<a href="javascript:void(0);" class="status-disabled">Order again</a>
							</td>
						</tr>

						<tr>
							<td class="table-image-wrapper">
								<img src="assets/placeholder.png" alt="Gig image" class="table-image">
							</td>
							<td>setup google analytics and track shopify store or wordpress website</td>
							<td>31 Dec 2021</td>
							<td>01 Jan 2022</td>
							<td>€53.82</td>
							<td>
								<a href="#" class="status">Order again</a>
							</td>
						</tr>

						<tr>
							<td class="table-image-wrapper">
								<img src="assets/placeholder.png" alt="Gig image" class="table-image">
							</td>
							<td>do themeforest wordpress theme installation and demo set up</td>
							<td>25 Dec 2021</td>
							<td>26 Dec 2022</td>
							<td>€16.53</td>
							<td>
								<a href="#" class="status">Order again</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>

		</div>

		<div id="footer" class="footer">
			<div class="flexbox" style="margin-top: 25px;">
				<div class="col-20 footer-offset">
					<ul class="footer-list">
						<li class="footer-list-item footer-list-header">Categories</li>
						<a href="/category/1"><li class="footer-list-item">Instrument Lessons</li></a>
						<a href="/category/2"><li class="footer-list-item">Record Soundtrack</li></a>
						<a href="/category/3"><li class="footer-list-item">Music Transcriptions</li></a>
						<a href="/category/4"><li class="footer-list-item">Musical video</li></a>
						<a href="/category/5"><li class="footer-list-item">DJ Mixing</li></a>
						<a href="/category/6"><li class="footer-list-item">Beat Making</li></a>
					</ul>
				</div>
				<div class="col-20">
					<div class="footer-logos" style="margin: auto;">
						<a href="/"><img src="assets/logo.png" style="max-width: 200px;" alt="Music World - Logo"></a>
						<a href="/"><img src="assets/logo-text.png" style="max-width: 200px;" alt="Music World - Logo text"></a>
					</div>
				</div>
				<div class="col-20 footer-offset-2">
					<ul class="footer-list">
						<li class="footer-list-item footer-list-header">About</li>
						<a href="/#general-information"><li class="footer-list-item">General information</li></a>
						<a href="/#about-us"><li class="footer-list-item">About us</li></a>
						<a href="/#reviews"><li class="footer-list-item">Reviews & Comments</li></a>
						<a href="/privacy-policy"><li class="footer-list-item">Privacy Policy</li></a>
						<a href="/terms-of-service"><li class="footer-list-item">Terms of Service</li></a>
					</ul>
				</div>
			</div>

			<div class="flexbox" style="margin-top: 25px;">
				<div class="col-60 display-flex-resp">
					<div class="footer-logo col-50" style="max-width: fit-content;">
						<a href="/"><img src="assets/logo-text.png" style="max-width: 200px;" alt="Music World - Logo text"></a>
					</div>
					<div class="footer-rights col-50" style="height: 100%; padding: 15px 5px;">
						Music World 2022 | All rights reserved
					</div>
				</div>
				<div class="col-40">
					<div class="float-right-resp">
						<ul class="footer-inline-list">
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/linkedin.png" class="social-logo" alt="Linkedin">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/instagram.png" class="social-logo" alt="Instagram">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/facebook.png" class="social-logo" alt="Facebook">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/twitter.png" class="social-logo" alt="Twitter">
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

<script src="js/jquery-3.6.0.min.js"></script>
<script>

	function buildImageColumn(image){
		return 	'<td class="table-image-wrapper">' +
				'<img src="' + image + '" alt="Gig image" class="table-image">' +
				'</td>';
	}

	function buildStatusColumn(value){
		let disabled = value == 'active';

		return 	'<td>' +
				'<a ' + 
				(disabled ? 'href="javascript:void(0);" class="status-disabled"' : 'href="#" class="status"') +
				'>Order again</a>' +
				'</td>';
	}

	function buildColumn(value){
		return 	'<td>' +
				value +
				'</td>';
	}

	function buildRow(data){
		return 	'<tr id="' + data.id + '">' +
				buildImageColumn(data.image) +
				buildColumn(data.name) +
				buildColumn(data.order_date) +
				buildColumn(data.due_on) +
				buildColumn(data.total) +
				buildStatusColumn(data.status) +
				'</tr>';
	}

	function checkStatus(order){
		let status = ( new URLSearchParams(window.location.search) ).get('status');

		return status == null || status == order.status;
	}

	$(function () {
		$.getJSON( "https://623af9f6f8827fbe47ac3209.mockapi.io/orders", function( data ) {
			let table = $('#table-body');

			table.empty();

		  	$.each( data, ( key, order ) => checkStatus(order) ? table.append(buildRow(order)) : void(0) );
		});
	});
</script>
</html>