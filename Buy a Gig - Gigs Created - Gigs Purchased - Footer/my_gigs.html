<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link rel="stylesheet" href="css/responsive.css">
	<link rel="stylesheet" href="css/app.css">
	<link rel="stylesheet" href="css/footer.css">
	<link rel="stylesheet" href="css/my_gigs.css">
</head>
<body>
	<nav style="display: none;">
	    <div class="main-title-class">
	        <a href="#" class="main-title">Music World</a>
	        <img src="assets/Music World Logo Blue.svg" alt="MWLogo" class="main-logo">
	    </div>
	    
	    <div class="search-container">
	        <span class="material-icons">search</span>
	        
	        <input type="text" class="search">
	       
	        <div class="search-btn">
	           <button>Search</button>
	       </div>
	    </div>

	    <div class="navigation">
	        <a href="">Messages</a>
	        <a href="">MisGigs</a>
	        <a href="">Orders</a>
	        <a href="">Create a Gig</a> 
	    </div>
	    
	    <img src="assets/user-icon.png" alt="User Icon" class="user-icon">
	</nav>

	<div class="wrapper">

		<div style="width: 100%; padding: 20px 10%; background-color: #F7F7F7;">
			
			<div class="margin">
				<h1>Gigs</h1>
			</div>

			<div class="margin tables-links" style="margin: 40px 0;">
				<a href="?status=active" class="table-link">Active</a>
				<a href="?status=pending" class="table-link">Pending approval</a>
				<a href="?status=modification" class="table-link">Requires modification</a>
				<a href="?status=draft" class="table-link">Draft</a>
				<a href="?status=denied" class="table-link">Denied</a>
				<a href="?status=paused" class="table-link">Paused</a>
				<a href="?" class="table-link">All</a>
				<div class="float-right-resp" style="padding: 10px;">
					<a href="#" class="create-gig">Create new gig</a>
				</div>
			</div>

			<div class="margin responsive-table">
				<table class="gigs-table">
					<thead>
						<tr>
							<th>Gig</th>
							<th></th>
							<th>Impressions</th>
							<th>Clicks</th>
							<th>Orders</th>
							<th>Cancellations</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody id="table-body">
					</tbody>
				</table>
			</div>

		</div>

		<div id="footer" class="footer">
			<div class="flexbox" style="margin-top: 25px;">
				<div class="col-20 footer-offset">
					<ul class="footer-list">
						<li class="footer-list-item footer-list-header">Categories</li>
						<a href="/category/1"><li class="footer-list-item">Instrument Lessons</li></a>
						<a href="/category/2"><li class="footer-list-item">Record Soundtrack</li></a>
						<a href="/category/3"><li class="footer-list-item">Music Transcriptions</li></a>
						<a href="/category/4"><li class="footer-list-item">Musical video</li></a>
						<a href="/category/5"><li class="footer-list-item">DJ Mixing</li></a>
						<a href="/category/6"><li class="footer-list-item">Beat Making</li></a>
					</ul>
				</div>
				<div class="col-20">
					<div class="footer-logos" style="margin: auto;">
						<a href="/"><img src="assets/logo.png" style="max-width: 200px;" alt="Music World - Logo"></a>
						<a href="/"><img src="assets/logo-text.png" style="max-width: 200px;" alt="Music World - Logo text"></a>
					</div>
				</div>
				<div class="col-20 footer-offset-2">
					<ul class="footer-list">
						<li class="footer-list-item footer-list-header">About</li>
						<a href="/#general-information"><li class="footer-list-item">General information</li></a>
						<a href="/#about-us"><li class="footer-list-item">About us</li></a>
						<a href="/#reviews"><li class="footer-list-item">Reviews & Comments</li></a>
						<a href="/privacy-policy"><li class="footer-list-item">Privacy Policy</li></a>
						<a href="/terms-of-service"><li class="footer-list-item">Terms of Service</li></a>
					</ul>
				</div>
			</div>

			<div class="flexbox" style="margin-top: 25px;">
				<div class="col-60 display-flex-resp">
					<div class="footer-logo col-50" style="max-width: fit-content;">
						<a href="/"><img src="assets/logo-text.png" style="max-width: 200px;" alt="Music World - Logo text"></a>
					</div>
					<div class="footer-rights col-50" style="height: 100%; padding: 15px 5px;">
						Music World 2022 | All rights reserved
					</div>
				</div>
				<div class="col-40">
					<div class="float-right-resp">
						<ul class="footer-inline-list">
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/linkedin.png" class="social-logo" alt="Linkedin">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/instagram.png" class="social-logo" alt="Instagram">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/facebook.png" class="social-logo" alt="Facebook">
								</a>
							</li>
							<li class="footer-inline-list-item">
								<a href="">
									<img src="assets/social/twitter.png" class="social-logo" alt="Twitter">
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

<script src="js/jquery-3.6.0.min.js"></script>
<script>

	function buildImageColumn(image, text){
		return 	'<td class="table-image-wrapper">' +
				'<img src="' + image + '" alt="Gig image" class="table-image">' +
				'</td>';
	}

	function buildColumn(value){
		return 	'<td>' +
				value +
				'</td>';
	}

	function buildRow(data){
		return 	'<tr id="' + data.id + '">' +
				buildImageColumn(data.image) +
				buildColumn(data.name) +
				buildColumn(data.impressions) +
				buildColumn(data.clicks) +
				buildColumn(data.orders) +
				buildColumn(data.cancellations) +
				buildColumn('') +
				'</tr>';
	}

	function checkStatus(gig){
		let status = ( new URLSearchParams(window.location.search) ).get('status');

		return status == null || status == gig.status;
	}

	$(function () {
		$.getJSON( "https://623af9f6f8827fbe47ac3209.mockapi.io/gigs", function( data ) {
			let table = $('#table-body');

			table.empty();

		  	$.each( data, ( key, gig ) => checkStatus(gig) ? table.append(buildRow(gig)) : void(0) );
		});
	});
</script>
</html>