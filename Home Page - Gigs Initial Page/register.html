<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Style Sheet -->
    <link rel="stylesheet" href="css/register.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ABeeZee&family=Piedra&display=swap" rel="stylesheet">

    <script type="text/javascript">
        var form;

        function initiate(){
            var button = document.getElementById("send");
            button.addEventListener("click", sendit);
            form = document.querySelector("form[name='register']");
            form.addEventListener("invalid", validation, true);
            form.addEventListener("input", checkval);
        }

        function validation(e){
            var elem = e.target;
            elem.style.background = '#FFDDDD';
        }

        function sendit(){
            var valid1 = form.checkValidity();
            var valid2 = passwordValidation();

            if(valid1 && valid2) {
                alert('¡Form successfully submitted!');
                form.submit();
            } else if(valid1 == false) {
                alert('You must fill in all fields and take into account the format of each one. (If you hover the mouse pointer over each one you can get more information about it).');
            } else {
                alert('Passwords do not match');
                document.getElementById("password1").value = "";
                document.getElementById("password1").style.background = '#FFDDDD';
                document.getElementById("password2").value = "";
                document.getElementById("password2").style.background = '#FFDDDD'; 
            }
        }  

        function checkval(e){
            var elem = e.target;

            if(elem.validity.valid){
                elem.style.background = '#96FF8D';
            }else{
                elem.style.background = '#FFDDDD';
            }
        }

        function passwordValidation() {
            pass1 = document.getElementById('password1');
            pass2 = document.getElementById('password2');

            if (pass1.value != pass2.value) {
                return false;
            } else {
                return true;
            }
        }

        addEventListener("load", initiate);
    </script>

    <title>Register</title>

</head>
<body>
    <div class="container">
        <div class="titles">
            <h1>Music World</h1>
            <h3>Welcome to the registration page. Please fill in the fields provided.</h3>
            Fields marked with an * are required
        </div>

        <div class="form">
            <form name="register" id="register" method="get" action="">
                <div class="form-field">
                    <label for="name">* Name:</label>
                    <input type="text" id="name" name="name" placeholder="Lukas" autocomplete="false" pattern="[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð]{3,16}"
                    title="Name must be a single name, containing only upper and/or lower case (From 3 to 16 letters). It cannot contain numbers or symbols. e.g. Lukas" required>
                </div>
                
                <div class="form-field">
                    <label for="lastname">* Last Name:</label>
                    <input type="text" id="lastname" name="lastname" placeholder="Zamora Mcgorrin" autocomplete="new-text" pattern="[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-]{2,40}"
                    title="Last name must contain at least one last name, in upper or lower case (2 to 40 letters). It cannot contain numbers or symbols. eg. Zamora Mcgorrin." required>
                </div>
                
                <div class="form-field">
                    <label for="email">* Email:</label>
                    <input type="email" id="email" name="email" placeholder="example@mail" autocomplete="new-text" 
                    title="Email should correspond to the following format at least: example@mail" required>
                </div>
                
                <div class="form-field">
                    <label for="address">Address:</label>
                    <input type="text" id="address" name="address" placeholder="Avenue Escaleritas 16" autocomplete="new-text" pattern="^[A-z]+\s[A-z]+\s\d+"
                    title="Address must contain the type of road (Street, Avenue...), the name of the street (Escaleritas), and the street number (16). e.g. Avenue Escaleritas 16.">
                </div>
                
                <div class="form-field">
                    <label for="password1">* Password:</label>
                    <input type="password" id="password1" name="password1" placeholder="Password" autocomplete="new-text" pattern ="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" 
                    title="The password must contain at least 8 characters, a capital letter, and a number. (Letters and numbers only. Symbols are not allowed)." required>
                </div>
                
                <div class="form-field">
                    <label for="password2">* Password:</label>
                    <input type="password" id="password2" name="password2" placeholder="Repeat your password" autocomplete="new-text" pattern ="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" required>
                </div>

                <div class="form-field-last">
                    <input id="send" name="send" type="button"  class="submit-button" value="Register">
                </div>
            </form> 
        </div>
    </div>
</body>
</html>